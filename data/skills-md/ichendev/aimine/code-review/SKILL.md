---
name: code-review
description: 代码审查流程，系统化分析代码质量、安全性和最佳实践
version: 1.1.0
author: AI Mine
tags:
  - code
  - review
  - quality
  - security
enabled: true
tools:
  - bash
  - file_read
  - rag_search
---

# 代码审查技能

专业的代码审查工作流程，帮助发现代码问题并提供改进建议。

## 适用场景

- Pull Request 代码审查
- 代码质量评估
- 安全漏洞扫描
- 重构前的代码分析

## 审查流程

### Phase 1: 代码理解
1. 读取代码文件，理解整体结构
2. 识别代码语言和框架
3. 理解业务逻辑和数据流

### Phase 2: 静态分析
1. 检查代码风格和命名规范
2. 分析函数复杂度
3. 检测重复代码
4. 验证类型安全

### Phase 3: 安全审查
1. 检查输入验证
2. 识别注入风险（SQL、XSS、命令注入）
3. 检查敏感信息处理
4. 验证认证和授权逻辑

### Phase 4: 性能评估
1. 识别潜在的性能瓶颈
2. 检查资源泄漏风险
3. 评估算法效率
4. 检查数据库查询优化

## 输出模板

```markdown
# 📊 代码审查报告

## 基本信息
- **文件**: [文件路径]
- **语言**: [编程语言]
- **代码行数**: [LOC]
- **审查时间**: [时间]

## 总体评分: X/10

### 评分细项
| 维度 | 评分 | 说明 |
|------|------|------|
| 可读性 | X/10 | [简评] |
| 安全性 | X/10 | [简评] |
| 性能 | X/10 | [简评] |
| 可维护性 | X/10 | [简评] |

## ✅ 优点
- [优点1]
- [优点2]

## 🔴 严重问题 (必须修复)
1. **[问题标题]**
   - 位置: 第 X 行
   - 问题: [描述]
   - 风险: [影响]
   - 修复: 
   ```[语言]
   // 修复后的代码
   ```

## 🟡 建议改进 (推荐修复)
1. **[问题标题]**
   - 位置: 第 X 行
   - 建议: [改进方案]

## 🔵 代码风格 (可选优化)
- [风格建议]

## 📝 总结
[审查总结，核心改进方向]
```

## 审查原则

1. **安全优先**: 安全问题必须标记为严重
2. **具体可行**: 每个问题都给出修复代码
3. **分级处理**: 按严重程度排列问题
4. **正向激励**: 指出代码中的优点
