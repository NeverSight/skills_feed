---
name: pw-cover-image
description: |
  为文章内容生成精美封面图的专用工具。

  核心功能:
  - 分析文章内容并自动选择最适合的视觉风格
  - 生成手绘风格的高质量封面图片
  - 支持 19 种预设风格 (elegant, blueprint, bold-editorial 等)
  - 支持多种宽高比 (2.35:1 电影感, 16:9 宽屏, 1:1 方形)
  - 自动提取核心主题并生成标题文字

  使用时机:
  - 用户明确要求 "生成封面图"、"创建文章封面"、"制作封面"
  - 用户提供文章内容并需要配图
  - 用户需要为博客、公众号、社交媒体制作封面

  不适用场景:
  - 用户只是询问如何制作封面 (提供建议即可)
  - 用户需要编辑现有图片 (使用图片编辑工具)
  - 用户需要生成非封面类型的图片 (使用通用图片生成工具)
---

# 封面图生成器

为文章生成手绘风格封面图, 支持多种风格选项。

## 快速开始

**最简单的用法**:
```bash
/pw-cover-image path/to/article.md
```
系统会自动分析内容、选择风格、生成封面。

**常用场景**:
```bash
# 技术文章
/pw-cover-image article.md --style blueprint

# 社交媒体方形封面
/pw-cover-image article.md --aspect 1:1

# 纯视觉背景 (无标题)
/pw-cover-image article.md --no-title

# 视频封面
/pw-cover-image article.md --aspect 16:9 --style bold-editorial
```

**文档导航**:
- 参数说明 → 了解所有可用参数
- 风格画廊 → 查看 19 种预设风格
- 常见问题与错误处理 → 解决使用问题
- 使用建议与最佳实践 → 提高封面质量
- 工作流程 → 了解内部处理步骤

## 使用方法

```bash
# 从 markdown 文件生成 (根据内容自动选择风格)
/pw-cover-image path/to/article.md

# 指定风格
/pw-cover-image path/to/article.md --style blueprint
/pw-cover-image path/to/article.md --style warm
/pw-cover-image path/to/article.md --style dark-atmospheric

# 不包含标题文字
/pw-cover-image path/to/article.md --no-title

# 组合选项
/pw-cover-image path/to/article.md --style minimal --no-title

# 从直接输入的文本生成
/pw-cover-image
[粘贴内容或描述主题]

# 直接输入并指定风格
/pw-cover-image --style playful
[粘贴内容]
```

## 参数说明

### --style <name>

指定封面的视觉风格。

**参数类型**: 字符串 (可选)

**可选值**: 见下方 "风格画廊" 章节的 19 种预设风格

**默认行为**: 如果不指定, 系统会根据文章内容自动选择最合适的风格

**使用示例**:
```bash
/pw-cover-image article.md --style blueprint  # 技术文档使用蓝图风格
/pw-cover-image article.md --style warm      # 个人故事使用温暖风格
```

**最佳实践**:
- 技术类文章推荐: blueprint, intuition-machine, editorial-infographic
- 产品类文章推荐: bold-editorial, notion, minimal
- 故事类文章推荐: warm, watercolor, fantasy-animation
- 不确定时留空, 让系统自动选择

### --aspect <ratio>

指定封面图片的宽高比。

**参数类型**: 字符串 (可选)

**可选值**:
- `2.35:1` - 电影感超宽屏 (默认), 适合博客头图、横幅
- `16:9` - 标准宽屏, 适合视频封面、演示文稿
- `1:1` - 方形, 适合社交媒体 (微信、微博、Instagram)

**默认值**: 2.35:1

**使用示例**:
```bash
/pw-cover-image article.md --aspect 16:9  # 视频封面
/pw-cover-image article.md --aspect 1:1   # 社交媒体
```

**最佳实践**:
- 博客文章: 使用 2.35:1 获得更强视觉冲击力
- 视频内容: 使用 16:9 匹配视频平台
- 社交分享: 使用 1:1 确保在各平台显示完整

### --lang <code>

指定封面标题文字的语言。

**参数类型**: 语言代码 (可选)

**可选值**: en (英文), zh (中文), ja (日文) 等标准语言代码

**默认行为**:
- 如果文章语言与对话语言一致, 自动使用该语言
- 如果不一致, 会在生成前询问用户选择

**使用示例**:
```bash
/pw-cover-image article.md --lang en  # 强制使用英文标题
/pw-cover-image article.md --lang zh  # 强制使用中文标题
```

**最佳实践**:
- 目标读者是中文用户: 使用 zh
- 国际化内容: 使用 en
- 通常不需要手动指定, 系统会智能判断

### --no-title

生成不含标题文字的纯视觉封面。

**参数类型**: 布尔标志 (可选)

**默认行为**: 包含标题文字

**使用场景**:
- 需要后期添加自定义文字
- 纯视觉背景图
- 需要在不同场合使用不同标题

**使用示例**:
```bash
/pw-cover-image article.md --no-title
/pw-cover-image article.md --style minimal --no-title
```

**注意事项**:
- 使用此选项后, 封面将只包含视觉元素和装饰
- 适合需要灵活性的场景

## 风格画廊

| 风格 | 说明 |
|------|------|
| `elegant` (默认) | 精致、优雅、低调 |
| `blueprint` | 技术图纸、工程精度 |
| `bold-editorial` | 杂志封面冲击力、戏剧性排版 |
| `chalkboard` | 黑色黑板、彩色粉笔绘画 |
| `dark-atmospheric` | 电影感暗色模式、发光点缀 |
| `editorial-infographic` | 杂志解说、视觉叙事 |
| `fantasy-animation` | 吉卜力/迪士尼风格、奇幻魅力 |
| `intuition-machine` | 技术简报、双语标签 |
| `minimal` | 超简洁、禅意、专注 |
| `nature` | 有机、平静、自然 |
| `notion` | 简洁 SaaS 仪表板、生产力风格 |
| `pixel-art` | 复古 8 位、怀旧游戏美学 |
| `playful` | 有趣、创意、异想天开 |
| `retro` | 半色调点、复古徽章、经典 |
| `sketch-notes` | 手绘、教育性、温暖 |
| `vector-illustration` | 扁平矢量、黑色轮廓、复古色彩 |
| `vintage` | 陈旧纸张、历史感、探险风格 |
| `warm` | 友好、亲切、以人为本 |
| `watercolor` | 柔和手绘、自然温暖 |

详细风格定义: `references/styles/<style>.md`

## 自动风格选择

当未指定 `--style` 时, 系统会分析内容选择最佳风格:

| 内容特征 | 选择的风格 |
|---------|-----------|
| 架构、系统设计、工程 | `blueprint` |
| 产品发布、主题演讲、营销、品牌 | `bold-editorial` |
| 教育、课堂、教程、教学 | `chalkboard` |
| 娱乐、创意、高端、电影感 | `dark-atmospheric` |
| 技术解说、科学、研究 | `editorial-infographic` |
| 故事讲述、儿童、奇幻、魔法 | `fantasy-animation` |
| 技术文档、学术、双语 | `intuition-machine` |
| 个人故事、情感、成长、生活 | `warm` |
| 简单、禅意、专注、本质 | `minimal` |
| 有趣、简单、初学者、休闲 | `playful` |
| 自然、环保、健康、有机 | `nature` |
| 流行文化、80/90 年代怀旧、徽章 | `retro` |
| 产品、SaaS、仪表板、生产力 | `notion` |
| 游戏、复古科技、开发者、8 位 | `pixel-art` |
| 教育、教程、知识分享 | `sketch-notes` |
| 创意提案、品牌、玩具风格 | `vector-illustration` |
| 历史、探索、遗产、传记 | `vintage` |
| 生活方式、旅行、美食、个人 | `watercolor` |
| 商业、专业、策略、分析 | `elegant` |

## 文件管理

### 输出目录

每个会话创建一个以内容主题命名的独立目录:

```
cover-image/{topic-slug}/
├── source-{slug}.{ext}    # 源文件 (文本、图片等)
├── prompts/
│   └── cover.md
└── cover.png
```

**主题命名规则**:
1. 从内容中提取主题 (2-4 个词, kebab-case)
2. 示例: "AI 的未来" → `ai-future`

### 冲突解决

如果 `cover-image/{topic-slug}/` 已存在:
- 追加时间戳: `{topic-slug}-YYYYMMDD-HHMMSS`
- 示例: `ai-future` 已存在 → `ai-future-20260118-143052`

### 源文件

使用 `source-{slug}.{ext}` 命名复制所有源文件:
- `source-article.md` (主要文本内容)
- `source-logo.png` (对话中的图片)

支持多个源文件: 文本、图片、对话中的文件。

## 工作流程

**流程概览**:
1. 分析内容 → 提取主题、语气、关键词
2. 确定选项 → 自动选择或使用指定的风格、宽高比
3. 确认选项 → 一次性确认所有参数 (风格、宽高比、语言)
4. 生成概念 → 创建标题和视觉元素
5. 创建提示词 → 保存到 prompts/cover.md
6. 生成图片 → 调用图片生成服务
7. 输出摘要 → 显示结果和文件位置

**用户交互点**:
- 仅在步骤 3 需要用户确认 (一次性确认所有选项)
- 如果有多个图片生成服务, 在步骤 6 询问选择

### 步骤 1: 分析内容

1. **保存源内容** (如果还不是文件):
   - 如果用户提供文件路径: 直接使用
   - 如果用户粘贴内容: 保存到目标目录的 `source.md`

2. **提取关键信息**:
   - **主题**: 文章讲什么?
   - **核心信息**: 关键要点是什么?
   - **语气**: 严肃、有趣、鼓舞人心、教育性?
   - **关键词**: 识别风格信号词

3. **语言检测**:
   - 检测内容的**源语言**
   - 检测对话上下文的**用户语言**
   - 注意源语言 ≠ 用户语言 (将在步骤 3 询问)

### 步骤 2: 确定选项

1. **风格选择**:
   - 如果指定了 `--style`, 使用该风格
   - 否则, 扫描内容的风格信号并自动选择 3 个候选
   - 如果没有明确信号, 默认使用 `elegant`

2. **宽高比**:
   - 如果指定了 `--aspect`, 使用该比例
   - 否则, 准备选项: 2.35:1 (电影感), 16:9 (宽屏), 1:1 (社交媒体)

### 步骤 3: 确认选项

**目的**: 让用户在生成前一次性确认所有选项。

**重要**: 使用 AskUserQuestion 在单个确认步骤中呈现所有选项。不要用多个单独的确认打断工作流程。

**确定要询问的问题**:

| 问题 | 何时询问 |
|------|---------|
| 风格 | 总是 (必需) |
| 宽高比 | 总是 (提供常用选项) |
| 语言 | 仅当 `源语言 ≠ 用户语言` |

**呈现选项** (使用 AskUserQuestion 包含所有适用问题):

**问题 1 (风格)** - 总是:
- 风格 A (推荐): [风格名称] - [简要说明]
- 风格 B: [风格名称] - [简要说明]
- 风格 C: [风格名称] - [简要说明]
- 自定义: 提供自定义风格参考

**问题 2 (宽高比)** - 总是:
- 2.35:1 电影感 (推荐) - 超宽、戏剧性
- 16:9 宽屏 - 标准视频/演示
- 1:1 方形 - 社交媒体优化

**问题 3 (语言)** - 仅当源语言 ≠ 用户语言:
- [源语言] (匹配内容)
- [用户语言] (你的偏好)

**语言处理**:
- 如果源语言 = 用户语言: 只需告知用户 (例如 "标题将使用中文")
- 如果不同: 询问标题文字使用哪种语言

### 步骤 4: 生成封面概念

根据选定的风格创建封面图概念:

**标题** (如果包含, 最多 8 个字符):
- 将核心信息提炼为有力的标题
- 使用钩子: 数字、问题、对比、痛点
- 如果使用 `--no-title` 标志则跳过

**视觉元素**:
- 符合风格的图像和图标
- 1-2 个代表主题的象征性元素
- 符合风格的隐喻或类比

### 步骤 5: 创建提示词文件

使用确认的选项将提示词保存到 `prompts/cover.md`。

**所有提示词都使用用户确认的语言偏好编写。**

**提示词格式**:

```markdown
封面主题: [2-3 个词的主题]
风格: [选定的风格名称]
宽高比: [确认的宽高比]

[如果包含标题:]
标题文字: [8 个字符或更少, 使用确认的语言]
副标题: [可选, 使用确认的语言]

视觉构图:
- 主视觉: [匹配风格的描述]
- 布局: [基于标题包含和宽高比的定位]
- 装饰元素: [符合风格的元素]

配色方案:
- 主色: [风格主色]
- 背景: [风格背景色]
- 点缀: [风格点缀色]

风格注释: [要强调的特定风格特征]

[如果无标题:]
注意: 无标题文字, 仅纯视觉插图。
```

### 步骤 6: 生成图片

**图片生成技能选择**:
1. 检查可用的图片生成技能
2. 如果有多个技能可用, 询问用户选择

**生成**:
使用提示词文件、输出路径和确认的宽高比调用选定的图片生成技能。

### 步骤 7: 输出摘要

```
封面图已生成!

主题: [主题]
风格: [风格名称]
宽高比: [宽高比]
标题: [封面标题] (或 "无标题 - 仅视觉")
语言: [确认的语言]
位置: [输出路径]

预览图片以验证是否符合你的期望。
```

## 注意事项

- 封面应在小预览尺寸下立即可理解
- 标题 (如果包含) 必须可读且有冲击力
- 视觉隐喻比字面表现效果更好
- 在整个封面中保持风格一致性
- 图片生成通常需要 10-30 秒
- 标题文字使用用户确认的语言偏好
- 宽高比: 2.35:1 用于电影感/戏剧性, 16:9 用于宽屏, 1:1 用于社交媒体

## 常见问题与错误处理

### 文件路径问题

**问题**: 找不到指定的文章文件

**原因**: 文件路径不正确或文件不存在

**解决方案**:
- 确保使用绝对路径或相对于当前工作目录的正确路径
- 检查文件扩展名是否正确 (.md, .txt 等)
- 使用 `ls` 命令验证文件是否存在

**示例**:
```bash
# 错误
/pw-cover-image article.md  # 如果不在文件所在目录

# 正确
/pw-cover-image /path/to/article.md
/pw-cover-image ./docs/article.md
```

### 内容分析失败

**问题**: 无法从文章中提取有效主题

**原因**: 文章内容过短、格式不规范或语言不支持

**解决方案**:
- 确保文章至少包含 100 字以上的有效内容
- 检查文章是否包含标题、段落等基本结构
- 对于非标准格式, 可以手动指定风格参数

**最佳实践**:
- 提供完整的文章内容, 而非片段
- 包含标题和主要段落
- 避免纯代码或纯数据内容

### 风格选择不理想

**问题**: 自动选择的风格不符合预期

**原因**: 文章内容特征不明显或包含多种主题

**解决方案**:
- 使用 `--style` 参数手动指定风格
- 参考 "自动风格选择" 表格了解匹配规则
- 尝试不同风格并比较效果

**示例**:
```bash
# 如果自动选择不理想, 手动指定
/pw-cover-image article.md --style blueprint
```

### 图片生成超时

**问题**: 图片生成时间过长或失败

**原因**: 网络问题、图片生成服务繁忙或提示词过于复杂

**解决方案**:
- 等待 30-60 秒后重试
- 检查网络连接
- 简化内容或使用更简单的风格 (如 minimal)
- 使用 `--no-title` 减少生成复杂度

### 标题文字显示问题

**问题**: 标题文字过长或显示不完整

**原因**: 自动提取的标题超过 8 个字符限制

**解决方案**:
- 系统会自动精简标题到 8 个字符以内
- 如果仍不满意, 使用 `--no-title` 后期手动添加
- 在文章开头明确核心主题, 帮助系统提取更好的标题

### 语言识别错误

**问题**: 标题语言与预期不符

**原因**: 文章包含多种语言或语言检测不准确

**解决方案**:
- 使用 `--lang` 参数明确指定语言
- 在确认步骤中选择正确的语言选项

**示例**:
```bash
/pw-cover-image article.md --lang zh  # 强制中文标题
```

### 目录冲突

**问题**: 输出目录已存在, 担心覆盖之前的文件

**原因**: 相同主题的封面已生成过

**解决方案**:
- 系统会自动添加时间戳避免冲突
- 格式: `{topic-slug}-YYYYMMDD-HHMMSS`
- 不会覆盖现有文件, 可以安全重新生成

**示例**:
```
cover-image/ai-future/           # 第一次生成
cover-image/ai-future-20260123-143052/  # 第二次生成
```

## 使用建议与最佳实践

### 内容准备

**提供完整文章**:
- 包含标题、引言、主体段落
- 至少 200-500 字的有效内容
- 清晰的主题和核心观点

**优化文章结构**:
- 在开头明确核心主题
- 使用清晰的段落划分
- 包含关键词和主题词

### 风格选择策略

**让系统自动选择** (推荐):
- 适用于大多数场景
- 系统会分析内容特征并推荐 3 个候选风格
- 在确认步骤中可以调整

**手动指定风格**:
- 品牌一致性要求高的场景
- 已知目标风格的情况
- 需要批量生成统一风格的封面

**风格测试**:
- 不确定时可以生成多个版本对比
- 使用 `--no-title` 生成纯视觉版本便于复用

### 宽高比选择

**根据发布平台选择**:
- 博客/网站头图: 2.35:1 (默认)
- 视频平台 (YouTube, B站): 16:9
- 社交媒体 (微信, 微博, Instagram): 1:1

**多平台发布**:
- 生成多个宽高比版本
- 使用相同风格保持一致性

**示例工作流**:
```bash
# 为同一文章生成多个版本
/pw-cover-image article.md --aspect 2.35:1  # 博客版
/pw-cover-image article.md --aspect 16:9    # 视频版
/pw-cover-image article.md --aspect 1:1     # 社交版
```

### 批量生成

**系列文章**:
- 使用相同的 `--style` 保持视觉一致性
- 让标题自动生成以体现差异
- 建立品牌识别度

**示例**:
```bash
/pw-cover-image article-1.md --style blueprint
/pw-cover-image article-2.md --style blueprint
/pw-cover-image article-3.md --style blueprint
```

### 质量优化

**提高封面质量**:
- 提供高质量的文章内容
- 明确核心主题和关键信息
- 选择与内容匹配的风格

**标题优化**:
- 在文章开头使用有力的标题
- 包含数字、问题或对比
- 避免过长或过于抽象的标题

**视觉效果**:
- 预览生成的封面
- 在目标尺寸下检查可读性
- 必要时重新生成或调整参数

### 工作流集成

**与其他工具配合**:
- 先完成文章写作
- 使用本工具生成封面
- 使用图片编辑工具进行微调 (如需要)

**文件管理**:
- 输出目录自动按主题组织
- 保留源文件和提示词便于追溯
- 定期清理不需要的版本

### 性能优化

**减少生成时间**:
- 使用简单风格 (minimal, elegant)
- 使用 `--no-title` 减少复杂度
- 避免在网络繁忙时段生成

**提高成功率**:
- 确保网络连接稳定
- 提供清晰的文章内容
- 使用推荐的参数组合

## 高级用法

### 自定义风格

通过 EXTEND.md 文件添加自定义风格配置。

**配置路径** (优先级顺序):
1. `.pw-skills/pw-cover-image/EXTEND.md` (项目级)
2. `~/.pw-skills/pw-cover-image/EXTEND.md` (用户级)

**使用场景**:
- 企业品牌风格
- 特定主题的定制风格
- 覆盖默认风格定义

### 提示词调试

查看生成的提示词文件了解系统如何理解内容。

**位置**: `cover-image/{topic-slug}/prompts/cover.md`

**用途**:
- 理解风格选择逻辑
- 调试生成问题
- 学习提示词编写

### 多图片生成服务

如果配置了多个图片生成服务, 系统会询问选择。

**选择建议**:
- 根据服务质量和速度选择
- 不同服务可能产生不同风格
- 可以尝试多个服务对比效果
