---
name: crypto-analysis
description: This skill should be used when the user asks to "analyze crypto", "分析行情", "analyze btc", "look at eth", "check sol", or mentions cryptocurrency technical analysis. It provides market maker perspective analysis using Binance API data.
version: 1.0.0
---

# Crypto Analysis Skill

做市商视角的加密货币技术分析框架。

## 核心原则

| # | 原则 |
|---|------|
| 1 | **做市商视角** — 站在流动性提供者/庄家角度思考 |
| 2 | **结构推演** — 禁止直接给"看涨/看跌"结论，必须通过结构推演 |
| 3 | **多路径思维** — 必须输出 3 条以上可能路径 |
| 4 | **可证伪性** — 所有判断必须附带否定条件 |
| 5 | **概率量化** — 路径概率必须给具体数值（如 55%） |

## 数据获取

每次分析必须调用币安 API 获取实时数据。参考 `references/api-endpoints.md` 获取完整端点列表。

### 必需数据

1. **K 线数据**：获取指定周期的 OHLCV 数据
2. **资金费率**：判断市场情绪极端值
3. **持仓量（OI）**：多空力量对比
4. **多空比**：大户和散户持仓比例

### API 调用示例

```bash
# K 线数据（合约）
curl -s "https://fapi.binance.com/fapi/v1/klines?symbol=BTCUSDT&interval=1h&limit=100"

# 资金费率
curl -s "https://fapi.binance.com/fapi/v1/fundingRate?symbol=BTCUSDT&limit=1"

# 持仓量
curl -s "https://fapi.binance.com/fapi/v1/openInterest?symbol=BTCUSDT"

# 大户多空比
curl -s "https://fapi.binance.com/futures/data/topLongShortAccountRatio?symbol=BTCUSDT&period=1h&limit=1"
```

## 指标计算

获取 K 线数据后，计算以下指标。详细公式参考 `references/indicators.md`。

- **RSI (14)**：超买超卖判断
- **MACD (12, 26, 9)**：趋势动量
- **ATR (14)**：波动率
- **布林带 (20, 2)**：波动区间和百分位
- **EMA (20, 50, 200)**：趋势方向

## 输出框架

### 数据面板

```
┌─────────────────────────────────────────────────────────────┐
│ 📊 {SYMBOL}/USDT 永续合约 │ {INTERVAL} │ {TIME}            │
├─────────────────────────────────────────────────────────────┤
│ 价格: ${PRICE}  │ 24h: {CHANGE}%  │ 成交量: ${VOL}         │
├─────────────────────────────────────────────────────────────┤
│ 【持仓数据】                                                 │
│ OI: {OI} │ 资金费率: {RATE}% │ 多空比(大户): {RATIO}       │
├─────────────────────────────────────────────────────────────┤
│ 【技术指标】                                                 │
│ RSI(14): {RSI} │ MACD: {DIF}/{DEA} │ ATR(14): ${ATR}       │
│ 布林: ${BOLL_UP} / ${BOLL_MID} / ${BOLL_DN} │ 带宽: {BW}%  │
│ EMA: 20=${EMA20} │ 50=${EMA50} │ 200=${EMA200}             │
└─────────────────────────────────────────────────────────────┘
```

### 执行摘要

```
┌─────────────────────────────────────────────────────────────┐
│ 🎯 执行摘要                                                  │
├─────────────────────────────────────────────────────────────┤
│ 核心区间: $_____ – $_____                                   │
│ 做市阶段: □吸筹 □拉升 □派发 □再平衡 □诱导                    │
│ 庄家意图: _____________________________________             │
│ 陷阱对象: □追多者 □扛空者 □抄底者 □高杠杆                    │
│ 一句话: _______________________________________             │
└─────────────────────────────────────────────────────────────┘
```

完整输出模板参考 `references/analysis-template.md`。

## 分析流程

### 单周期分析

1. 获取 K 线和衍生品数据
2. 计算技术指标
3. 输出数据面板和执行摘要
4. 分析流动性分布和资金流向
5. 判断做市阶段
6. 输出多路径推演（3 条以上）
7. 给出操作建议和关键监控点

### 全周期分析（interval=full）

依次获取 1d、4h、1h、15m 数据，输出多周期共振矩阵：

```
┌────────┬────────┬────────┬─────────────┬───────────────┬──────────┐
│ 周期   │ 趋势   │ RSI    │ MACD        │ 关键位        │ 信号强度  │
├────────┼────────┼────────┼─────────────┼───────────────┼──────────┤
│ 日线   │ ↑/↓/— │ ___    │ ___         │ $_____        │ ★★★☆☆   │
│ 4H     │ ↑/↓/— │ ___    │ ___         │ $_____        │ ★★★☆☆   │
│ 1H     │ ↑/↓/— │ ___    │ ___         │ $_____        │ ★★★☆☆   │
│ 15m    │ ↑/↓/— │ ___    │ ___         │ $_____        │ ★★★☆☆   │
└────────┴────────┴────────┴─────────────┴───────────────┴──────────┘
```

## 连续对话支持

### 再分析

当用户说「再分析」时：
1. 重新获取最新数据
2. 对照之前路径的否定条件
3. 更新路径状态（✅ 有效 / ❌ 否定）
4. 调整概率分配

### 复盘

当用户说「复盘」时：
1. 回顾初始判断与实际走势
2. 标注哪些路径被验证/否定
3. 分析关键转折点
4. 提炼可迁移经验

## 注意事项

- 所有价格必须精确到小数点后 2 位
- 概率总和必须等于 100%
- 禁止使用时事直接判断方向
- 否定条件必须具体可验证
