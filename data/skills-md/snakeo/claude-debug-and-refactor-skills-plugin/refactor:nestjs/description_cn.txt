重构 NestJS/TypeScript 代码以提高可维护性、可读性并遵守最佳实践。识别并修复循环依赖、上帝对象服务、具有业务逻辑的胖控制器、深层嵌套和 SRP 违规。应用 NestJS 模式，包括正确的模块组织、提供程序范围、自定义装饰器、防护、拦截器、管道、带有类验证器的 DTO、异常过滤器、CQRS、存储库模式和事件驱动架构。将代码转换为遵循 SOLID 原则的示例性实现。
