Refactorice el código FastAPI/Python para mejorar la mantenibilidad, la legibilidad y el cumplimiento de las mejores prácticas. Esta habilidad transforma el código de trabajo en código ejemplar siguiendo patrones FastAPI, Pydantic v2 y principios SOLID. Aborda los manejadores de rutas pesadas, el bloqueo de E/S en rutas asíncronas, la duplicación de código, el anidamiento profundo, las sugerencias de tipo faltantes y la inyección de dependencia inadecuada. Aplíquelo cuando observe lógica de negocios en rutas, patrones de Pydantic v1 o código que viole las convenciones de PEP 8.
