Полные навыки E2E (сквозного) и интеграционного тестирования для проектов TypeScript/NestJS с использованием Jest, реальной инфраструктуры через Docker и шаблона GWT.

ВСЕГДА используйте этот навык, когда пользователю необходимо:

**НАСТРОЙКА** – инициализация или настройка инфраструктуры тестирования E2E:
- Настроить E2E-тестирование для нового проекта.
- Настройте docker-compose для тестирования (Kafka, PostgreSQL, MongoDB, Redis)
- Создайте конфигурацию jest-e2e.config.ts или E2E Jest.
- Настройка помощников по тестированию для базы данных, Kafka или Redis.
- Настройка переменных среды .env.e2e.
- Создать структуру каталогов test/e2e.

**ЗАПИСЬ** – создание или добавление E2E/интеграционных тестов:
- Написание, создание, добавление или создание тестов e2e или интеграционных тестов.
- Тестируйте конечные точки API, рабочие процессы или комплексные функции.
- Тестируйте с реальными базами данных, брокерами сообщений или внешними сервисами.
- Тестируйте потребителей/производителей Kafka, рабочие процессы, управляемые событиями.
- Работа с любым файлом, заканчивающимся на .e2e-spec.ts или в каталоге test/e2e/.
- Используйте шаблон GWT (Дано-Когда-То) для тестов.

**ОБЗОР** – аудит или оценка тестов E2E:
- Проверьте качество существующих тестов E2E.
- Проверьте шаблоны изоляции тестов и очистки.
- Аудит соответствия шаблону GWT
- Оценить качество и специфичность утверждений.
- Проверка антишаблонов (несколько действий WHEN, условные утверждения)

**RUN** – выполнить или проанализировать результаты теста E2E:
- Запуск тестов E2E
- Запуск/остановка инфраструктуры Docker для тестирования.
- Анализ результатов тестов E2E
- Убедитесь, что службы Docker исправны.
- Интерпретация результатов тестирования и ошибок.

**ОТЛАДКА** – исправление неудачных или нестабильных тестов E2E:
- Исправлены неудачные тесты E2E.
- Отладка нестабильных тестов или проблем с изоляцией тестов.
- Устранение ошибок подключения (база данных, Kafka, Redis)
- Исправить проблемы с тайм-аутом или сбои асинхронных операций.
- Диагностика состояний гонки или утечки состояния
- Отладка проблем с использованием сообщений Kafka.

**ОПТИМИЗИРОВАТЬ** – повысить производительность тестов E2E:
- Ускорение медленных тестов E2E.
- Оптимизация запуска инфраструктуры Docker.
- Замените фиксированное ожидание умным опросом.
- Уменьшите время очистки перед каждой очисткой
- Улучшите распараллеливание тестов там, где это безопасно.

Ключевые слова: e2e, сквозной, интеграционный тест, e2e-spec.ts, test/e2e, Jest, супертест, NestJS, Kafka, Redpanda, PostgreSQL, MongoDB, Redis, docker-compose, шаблон GWT, «Дано-когда-то», реальная инфраструктура, изоляция теста, нестабильный тест, MSW, nock, waitForMessages, fix e2e, debug e2e, запустить e2e, обзор e2e, оптимизировать e2e, настроить e2e
