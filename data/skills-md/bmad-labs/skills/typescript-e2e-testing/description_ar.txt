إكمال مهارات اختبار E2E (الشامل) والتكامل لمشاريع TypeScript/NestJS باستخدام Jest والبنية التحتية الحقيقية عبر Docker ونمط GWT.

استخدم هذه المهارة دائمًا عندما يحتاج المستخدم إلى:

**الإعداد** - تهيئة البنية الأساسية لاختبار E2E أو تكوينها:
- إعداد اختبار E2E لمشروع جديد
- تكوين docker-compose للاختبار (Kafka وPostgreSQL وMongoDB وRedis)
- قم بإنشاء تكوين jest-e2e.config.ts أو E2E Jest
- إعداد مساعدي الاختبار لقاعدة البيانات أو Kafka أو Redis
- تكوين متغيرات البيئة .env.e2e
- إنشاء بنية دليل الاختبار/e2e

**الكتابة** - إنشاء أو إضافة اختبارات E2E/التكامل:
- كتابة أو إنشاء أو إضافة أو إنشاء اختبارات e2e أو اختبارات التكامل
- اختبار نقاط نهاية واجهة برمجة التطبيقات أو سير العمل أو الميزات الكاملة من البداية إلى النهاية
- اختبر باستخدام قواعد بيانات حقيقية أو وسطاء رسائل أو خدمات خارجية
- اختبار مستهلكي/منتجي كافكا، وسير العمل المبني على الأحداث
- العمل على أي ملف ينتهي بـ .e2e-spec.ts أو في دليل test/e2e/
- استخدم نمط GWT (معطى-متى-ثم) للاختبارات

**المراجعة** - تدقيق أو تقييم اختبارات E2E:
- مراجعة اختبارات E2E الحالية للتأكد من الجودة
- التحقق من عزل الاختبار وأنماط التنظيف
- تدقيق الامتثال لنمط GWT
- تقييم جودة التأكيد وخصوصيته
- التحقق من وجود أنماط مضادة (إجراءات WHEN المتعددة، والتأكيدات الشرطية)

**RUN** - تنفيذ أو تحليل نتائج اختبار E2E:
- تشغيل اختبارات E2E
- بدء/إيقاف البنية التحتية لـ Docker للاختبار
- تحليل نتائج اختبار E2E
- التحقق من صحة خدمات Docker
- تفسير نتائج الاختبار والفشل

**DEBUG** - إصلاح اختبارات E2E الفاشلة أو غير المستقرة:
- إصلاح اختبارات E2E الفاشلة
- تصحيح الاختبارات غير المستقرة أو مشكلات عزل الاختبار
- استكشاف أخطاء الاتصال وإصلاحها (قاعدة البيانات، كافكا، ريديس)
- إصلاح مشكلات المهلة أو فشل العملية غير المتزامنة
- تشخيص حالات السباق أو تسرب الدولة
- تصحيح مشكلات استهلاك رسالة كافكا

**التحسين** - تحسين أداء اختبار E2E:
- تسريع اختبارات E2E البطيئة
- تحسين بدء تشغيل البنية التحتية لـ Docker
- استبدال فترات الانتظار الثابتة بالاقتراع الذكي
- تقليل وقت التنظيف قبل كل مرة
- تحسين موازاة الاختبار حيثما يكون آمنًا

الكلمات الرئيسية: e2e، نهاية إلى نهاية، اختبار التكامل، e2e-spec.ts، اختبار / e2e، Jest، supertest، NestJS، Kafka، Redpanda، PostgreSQL، MongoDB، Redis، docker-compose، نمط GWT، Give-When-Then، البنية التحتية الحقيقية، اختبار العزل، اختبار غير مستقر، MSW، nock، waitForMessages، إصلاح e2e، تصحيح e2e، تشغيل e2e، مراجعة e2e، تحسين e2e، إعداد e2e
