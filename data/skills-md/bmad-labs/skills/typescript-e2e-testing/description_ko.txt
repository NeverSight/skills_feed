Jest, Docker를 통한 실제 인프라 및 GWT 패턴을 사용하여 TypeScript/NestJS 프로젝트에 대한 완전한 E2E(엔드 투 엔드) 및 통합 테스트 기술입니다.

사용자가 다음을 수행해야 하는 경우 항상 이 기술을 사용하십시오.

**설정** - E2E 테스트 인프라 초기화 또는 구성:
- 새 프로젝트에 대한 E2E 테스트 설정
- 테스트용 docker-compose 구성(Kafka, PostgreSQL, MongoDB, Redis)
- jest-e2e.config.ts 또는 E2E Jest 구성 생성
- 데이터베이스, Kafka 또는 Redis에 대한 테스트 도우미 설정
- .env.e2e 환경 변수 구성
- test/e2e 디렉토리 구조 생성

**작성** - E2E/통합 테스트 생성 또는 추가:
- e2e 테스트 또는 통합 테스트 작성, 생성, 추가 또는 생성
- API 엔드포인트, 워크플로 또는 전체 기능을 엔드 투 엔드로 테스트합니다.
- 실제 데이터베이스, 메시지 브로커 또는 외부 서비스로 테스트
- Kafka 소비자/생산자, 이벤트 중심 워크플로 테스트
- .e2e-spec.ts 또는 test/e2e/ 디렉토리로 끝나는 모든 파일 작업
- 테스트에 GWT(Given-When-Then) 패턴을 사용합니다.

**검토** - E2E 테스트 감사 또는 평가:
- 품질에 대한 기존 E2E 테스트 검토
- 테스트 격리 및 정리 패턴 확인
- GWT 패턴 준수 감사
- 주장의 품질과 특이성을 평가합니다.
- 안티 패턴 확인(여러 WHEN 작업, 조건부 주장)

**실행** - E2E 테스트 결과를 실행하거나 분석합니다.
- E2E 테스트 실행
- 테스트를 위한 Docker 인프라 시작/중지
- E2E 테스트 결과 분석
- Docker 서비스가 정상인지 확인
- 테스트 출력 및 실패 해석

**디버그** - 실패하거나 불안정한 E2E 테스트 수정:
- 실패한 E2E 테스트 수정
- 불안정한 테스트 또는 테스트 격리 문제 디버그
- 연결 오류 문제 해결(데이터베이스, Kafka, Redis)
- 시간 초과 문제 또는 비동기 작업 실패 수정
- 경합 상태 또는 상태 누출 진단
- Kafka 메시지 소비 문제 디버그

**최적화** - E2E 테스트 성능 개선:
- 느린 E2E 테스트 속도 향상
- Docker 인프라 시작 최적화
- 고정 대기를 스마트 폴링으로 대체
- 매 정리 시간 전 단축
- 안전한 곳에서 테스트 병렬화 개선

키워드: e2e, 엔드 투 엔드, 통합 테스트, e2e-spec.ts, test/e2e, Jest, supertest, NestJS, Kafka, Redpanda, PostgreSQL, MongoDB, Redis, docker-compose, GWT 패턴, Give-When-Then, 실제 인프라, 테스트 격리, 불안정한 테스트, MSW, nock, waitForMessages, e2e 수정, e2e 디버그, e2e 실행, 검토 e2e, e2e 최적화, e2e 설정
