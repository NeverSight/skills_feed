使用 Jest、@golevelup/ts-jest 和内存数据库完成 TypeScript/NestJS 项目的单元测试技能。

当用户需要执行以下操作时，请始终使用此技能：

**SETUP** - 初始化或配置单元测试：
- 为新项目设置 Jest
- 配置测试基础设施（jest.config.ts）
- 安装测试依赖项（@nestjs/testing、@golevelup/ts-jest）
- 创建模拟助手或测试实用程序
- 设置覆盖配置

**WRITE** - 创建或添加单元测试：
- 编写、创建、添加或生成单元测试
- 测试服务、用例、控制器、防护、拦截器、管道或过滤器
- 添加新代码或功能的测试
- 提高测试覆盖率或添加缺失的测试
- 模拟依赖关系或设置测试装置
- 处理以 .spec.ts 结尾的任何文件

**审查** - 审核或评估单元测试：
- 审查现有的质量测试
- 检查测试覆盖率和差距
- 审核测试模式和约定
- 评估断言质量

**RUN** - 执行或分析测试结果：
- 运行单元测试
- 分析测试结果或覆盖率报告
- 了解测试失败或成功
- 检查哪些测试通过/失败

**调试** - 修复失败或损坏的测试：
- 修复失败的单元测试
- 调试测试错误或异常
- 解决模拟问题或设置问题
- 解决测试超时或不稳定测试的问题
- 诊断“未定义”或意外结果

**优化** - 提高测试性能和可维护性：
- 加快缓慢的测试速度
- 修复打开手柄阻止干净退出的问题
- 改进测试组织
- 减少测试执行时间
- 清理测试代码

关键词：单元测试、spec、jest、typescript、nestjs、mock、DeepMocked、createMock、AAA、测试覆盖率、TDD、.spec.ts、测试、编写测试、添加测试、创建测试、修复测试、调试测试、运行测试、审查测试、优化测试、测试设置、jest 配置
