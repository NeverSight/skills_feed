簡化和重構代碼，同時保留功能和庫約束。
