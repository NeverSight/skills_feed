---
name: daily-review
description: |
  日清助手 - AI辅助决策的知识收集箱清理工具。
  Agent 给出"保留/删除"建议及理由，用户确认后手动执行。
  遵循"采集不判断，日清做决策"原则，5-10分钟完成每日知识整理。
  Triggers: /daily-review, /日清, /review
---

# 日清助手 (Daily Review)

**角色定位**：知识决策顾问，为收集箱中的每个文件提供"保留/删除"建议及理由，辅助你快速决策。

## 核心职责

**单一职责**：批量扫描收集箱，针对每个文件给出"保留/删除"建议及判断理由，由用户确认后手动执行操作。

## 设计原则：三阶段知识管理

```
📥 采集阶段 → 完整保留，不判断（已完成，使用 /note）
📋 日清阶段 → AI建议 + 用户决策（本技能）
💎 提炼阶段 → 深度整理，资产化（使用 /process-doc 等）
```

**核心理念**：AI 提供决策建议降低认知负担，用户保持最终控制权，决策理由留痕便于回溯。

## 使用场景

触发指令：`/daily-review` 或 `/日清` 或 `/review`

适用场景：
- 每天固定时间（如晚上或早晨）清理收集箱
- 收集箱积累了多个采集文件需要批量处理
- 需要快速决策哪些内容值得保留、哪些需要删除
- 希望 AI 给出决策建议，而非自己从8个选项中选择

## 工作流程

当你输入 `/daily-review` 或 `/日清` 时，我会：

### 第一步：扫描收集箱

1. **读取决策标准**
   - 执行前必须先读取 `references/decision_criteria.md`
   - 了解判断"有用"的标准（主战场聚焦、实战价值）

2. **扫描目标目录**
   - 扫描 `E:\OBData\ObsidianDatas\0收集箱日清\` 目录
   - 列出所有待处理的 `.md` 文件
   - 按创建时间排序（最新的在前）

3. **生成概览并选择处理模式**

   显示格式：
   ```markdown
   📊 收集箱概览
   找到 [N] 个待处理文件：

   1. [2026-02-04] 文件名1.md (2.5KB)
   2. [2026-02-03] 文件名2.md (1.8KB)
   3. [2026-02-03] 文件名3.md (3.1KB)
   ...

   ⏱️ 预估时间：全部处理约 [N×0.5] 分钟

   🎯 处理模式选择：
   [A] 处理全部 [N] 个文件
   [P] 部分处理（选择要处理的序号）
   [Q] 退出日清流程

   请选择：
   ```

4. **根据用户选择确定处理范围**

   **如果选择 [A]**：处理所有文件

   **如果选择 [P]**：
   ```markdown
   请输入要处理的文件序号（支持多种格式）：

   格式示例：
   - 单个：1
   - 多个：1,3,5 或 1 3 5
   - 范围：1-3 (表示 1,2,3)
   - 混合：1-3,5,7-9

   你的选择：
   ```

   - 解析用户输入的序号
   - 验证序号有效性（不能超出总数）
   - 显示确认信息：`✅ 将处理 [M] 个文件：[序号列表]`
   - 只对选中的文件进行后续处理

   **如果选择 [Q]**：退出日清流程

### 第二步：逐个分析与建议

**重要执行规范**：必须逐个文件处理，不能一次性处理多个文件。

对每个文件，我会：

1. **读取并分析文件**
   - 读取文件的 frontmatter 元数据（type, summary, tags）
   - 读取文件的完整内容
   - 基于 decision_criteria.md 中的标准进行判断

2. **给出决策建议并等待用户回复**

   输出格式：
   ```markdown
   📄 文件 [X/总数]：[文件名]

   🤖 Agent 建议：【保留】或【删除】

   📝 理由：
   - ✅/❌ 理由1（如：包含完整的问题解决路径）
   - ✅/❌ 理由2（如：代码可复用）
   - ✅/❌ 理由3（如：属于主战场：XXX）
   - ⚠️ 建议移动到：[建议的目标路径]（仅保留时显示）

   👉 是否同意此建议？
   [Y] 同意 Agent 的建议
   [N] 不同意，由我自己决定
   [V] 查看完整文件内容再决定
   [S] 跳过此文件，稍后处理
   [Q] 退出日清流程
   ```

3. **等待用户输入**

   **关键要求**：
   - 每次只处理一个文件
   - 显示建议后，停止输出，等待用户回复
   - 用户回复单个字母（Y/N/V/S/Q）
   - 收到用户选择后，执行对应操作
   - 完成当前文件后，再继续下一个文件
   - **绝对不能一次性显示所有文件的建议**
   - **绝对不能要求用户批量回复（如 "YYY" 表示全部同意）**

### 第三步：执行操作并自动继续

**关键执行要求**：
- 根据用户的回复执行对应操作
- 完成当前文件的操作后，自动继续处理下一个文件
- 不需要额外的"按任意键继续"提示
- 整个流程保持连续，直到所有文件处理完毕或用户选择 [Q] 退出

根据用户选择：

#### 用户选择 [Y] 同意

**如果建议是"保留"**：

1. **写入决策标注到原文顶部**

   在原文件的最顶部（frontmatter 之后）插入：
   ```markdown
   > [!info] 📌 日清审核记录 (YYYY-MM-DD)
   > **决策**：保留
   > **理由**：[将判断理由完整写在这里，多条理由用换行列表]
      - ✅/❌ 理由1（如：包含完整的问题解决路径）
      - ✅/❌ 理由2（如：代码可复用）
      - ✅/❌ 理由3（如：属于主战场：XXX）
   > **建议位置**：`[建议的目标目录路径]`
   ```
要求：插入的内容不能进行精简，必须保留所有信息。

2. **修改文件的 frontmatter 元数据**

   修改 status 字段，并补充相关的 tags（主题关键词）：
   ```yaml
   status: 待整理
   tags: [相关关键词1, 相关关键词2]
   ```

3. **提示用户手动移动，并立即继续下一个**
   ```
   ✅ 决策标注已写入文件

   📂 请手动移动文件到建议位置：
   源文件：E:\OBData\ObsidianDatas\0收集箱日清\[文件名].md
   目标位置：[建议的目标路径]

   ---
   正在继续下一个文件...
   ```

   **执行要求**：显示完提示后，立即继续处理下一个文件。

**如果建议是"删除"**：

1. **提示用户手动删除，并立即继续下一个**
   ```
   ✅ 已确认删除

   🗑️ 请手动删除文件：
   E:\OBData\ObsidianDatas\0收集箱日清\[文件名].md

   ---
   正在继续下一个文件...
   ```

   **执行要求**：显示完提示后，立即继续处理下一个文件。



#### 用户选择 [N] 不同意

1. **询问用户意见**

   显示以下选项并等待用户输入：
   ```
   你不同意 Agent 的建议，请选择你的决策：
   [K] 保留此文件（由我自己决定移动到哪里）
   [D] 删除此文件
   [S] 跳过此文件（暂不处理）
   ```

2. **根据用户选择执行**
   - 如果选 [K]：执行保留流程（写入标注 + 元数据），理由改为"用户自主决策保留"，然后继续下一个
   - 如果选 [D]：执行删除流程，然后继续下一个
   - 如果选 [S]：跳过当前文件，继续下一个

#### 用户选择 [V] 查看完整内容

1. **显示文件完整内容**
   - 显示 frontmatter
   - 显示全部正文内容

2. **重新询问决策**
   - 再次显示建议和理由
   - 提供选项（Y/N/S/Q，去掉V选项避免死循环）
   - 等待用户输入

#### 用户选择 [S] 跳过

- 显示提示：`⏭️ 已跳过此文件，稍后处理`
- 立即继续处理下一个文件


#### 用户选择 [Q] 退出

- 显示退出提示：`👋 日清流程已结束。剩余 [N] 个文件待处理。`
- 结束日清流程




## 决策标准（快速参考）

### 判断"保留"的标准（必须满足至少一条）

✅ **保留**：
- 我现在就能用到（当前项目需要）
- 需要验证真伪（他人经验需要实践检验）
- 与主战场强相关：
  - 公众号写作（AI、知识管理、个人成长）
  - 医疗器械软件开发（架构、质量、合规）
  - 全栈独立开发
- 包含完整的问题解决路径（可复现）
- 代码/配置可复用
- 包含独特的避坑指南

### 判断"删除"的标准（满足任一条即删除）

❌ **删除**：
- 这个知识很重要（但和我无关）
- 以后可能用到（囤积心态）
- 这个作者很有名（但我没有实际需求）
- 临时性问题（已解决，无复用价值）
- 重复内容（已有更好的笔记）
- 明显无关内容（与主战场无关）
- 纯粹的信息囤积

### 边界情况处理

⚠️ **不确定时的默认策略**：
- 如果 2 分钟内无法判断价值 → **默认删除**
- 真正重要的内容，会再次出现
- 避免"以防万一"的囤积心态

详细标准见：`references/decision_criteria.md`

## 执行规范（重要）

### 交互流程原则

**核心要求**：逐个文件处理，每个文件处理完成后等待用户回复，再继续下一个。

执行步骤：
1. 扫描收集箱，获取所有待处理文件列表
2. 显示概览，让用户选择处理模式：
   - [A] 处理全部文件
   - [P] 部分处理（用户输入序号选择）
   - [Q] 退出
3. 根据用户选择确定要处理的文件列表
4. 对于每个待处理文件：
   - 读取并分析
   - 显示建议和理由
   - 显示选项（Y/N/V/S/Q）
   - **停止输出，等待用户回复**
5. 收到用户回复后，执行对应操作
6. 完成当前文件后，自动继续下一个文件（重复步骤4-5）
7. 直到所有选中的文件处理完毕或用户选择 [Q] 退出

**禁止的做法**：
- ❌ 一次性显示所有文件的建议
- ❌ 要求用户批量回复（如 "YYY" 表示全部同意）
- ❌ 在用户回复前就继续处理下一个文件
- ❌ 在每个文件处理完后要求"按任意键继续"（应该直接继续下一个）
- ❌ 强制用户处理所有文件（应该允许部分处理）

**正确的交互模式**：
```
Agent: [显示概览 + 处理模式选项]
User: P
Agent: [请输入序号]
User: 1,3,5
Agent: [确认：将处理 3 个文件 + 显示第1个文件的建议 + 选项]
User: Y
Agent: [执行操作 + 显示第3个文件的建议 + 选项]
User: N
Agent: [询问进一步决策]
User: K
Agent: [执行操作 + 显示第5个文件的建议 + 选项]
...
```

### 批处理原则

- ✅ 支持全量处理或部分处理（用户选择）
- ✅ 用户可根据可用时间灵活选择处理数量
- ✅ 每个文件决策时间控制在 30 秒内
- ✅ 整个日清流程 5-10 分钟完成（可通过部分处理实现）
- ✅ 流程连续，无需手动触发下一个
- ✅ 未处理的文件下次继续，支持分批日清

### AI 建议原则

- ✅ 给出明确的"保留/删除"建议（不模糊）
- ✅ 列出 3-5 条具体理由（基于决策标准）
- ✅ 保留时必须给出"建议移动位置"
- ✅ 理由要具体，不能泛泛而谈（如"内容有价值"太模糊）

### 决策留痕原则

- ✅ 所有保留的文件必须写入决策标注
- ✅ 决策理由写入 frontmatter 和正文顶部（双重记录）
- ✅ 便于未来审计"当时为什么保留"

### 手动执行原则

- ✅ 用户保持最终控制权（手动移动/删除文件）
- ✅ 避免"黑盒自动化"的不安全感
- ✅ 通过手动操作加深对知识流转的认知

## 与其他 skills 的协作

**上游**：
- `conversation-extractor`：生成基础笔记到收集箱

**协作**：
- `knowledge_auditor`：对保留但不确定的文件进行深度审计（周回顾时）

**下游**：
- 周回顾/月回顾：对保留的文件进行深度提炼
- `process-doc-generator`：将保留的实战记录升级为过程文档
- `qa-appender`：将保留的问答追加到现有笔记

## 资源文件

- **决策标准**：[references/decision_criteria.md](references/decision_criteria.md)
- **项目目录映射**：[references/project_directories.md](references/project_directories.md)


## 与旧版本的区别

### 旧版本（8选项多路分流）

```
展示：文件名 + 摘要 + 前200字预览
↓
用户决策：从 8 个选项中选择 (D/K/A/U/M/V/S/Q)
↓
Agent 自动执行：删除/移动/追加/升级等操作
```

**痛点**：
- 决策负担重（8个选项）
- 缺乏决策指导（需要用户自己判断）
- 无决策留痕（处理完就消失）
- 自动化黑盒（担心误操作）

### 新版本（AI建议 + 用户确认）

```
Agent 分析：读取完整文件 + 应用决策标准
↓
Agent 建议：给出"保留/删除" + 3-5条具体理由
↓
用户确认：同意/不同意（二元判断）
↓
若保留：写入决策标注 + 修改元数据 → 用户手动移动
若删除：用户手动删除
↓
继续下一个
```

**优势**：
- ✅ 降低认知负担（二元判断 vs 8选1）
- ✅ 提高决策质量（有理由支撑）
- ✅ 增强可回溯性（理由写在文件中）
- ✅ 保持控制感（手动执行）
- ✅ 决策教育（学习 AI 的判断标准）
