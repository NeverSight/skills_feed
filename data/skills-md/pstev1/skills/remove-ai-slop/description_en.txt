Check the diff against master and remove all AI generated slop introduced in this branch. This includes extra comments, defensive checks, type casts, and inconsistent code style.
