このスキルは、React、Next.js、Cloudflare Workers アプリケーションに Clerk 認証を統合するための包括的な知識を提供します。これは、ユーザー認証の設定、保護されたルートの実装、JWT トークンの検証、ユーザー メタデータと組織クレームを含むカスタム JWT テンプレートの作成、Clerk ミドルウェアの構成、shadcn/ui コンポーネントとの統合、認証フローのテスト、または Clerk 認証エラーのトラブルシューティングを行うときに使用する必要があります。

以下の場合に使用します: React/Vite プロジェクトへの Clerk の追加、Next.js App Router での Clerk のセットアップ、Cloudflare Workers での Clerk 認証の実装、ルート保護のための ClarkMiddleware の構成、ショートコード (user.id、user.email、user.public_metadata.role) を使用したカスタム JWT テンプレートの作成、RBAC のセッション クレームへのアクセス、Supabase/Grafbase との統合、@clark/backend でのトークンの検証、 Clerk と Hono の統合、Clerk shadcn/ui コンポーネントの使用、Playwright での E2E テストの作成、テスト セッション トークンの生成、テスト電子メール アドレスと電話番号の使用、または認証エラーの発生。

文書化された 11 件の問題を防止します: 秘密キーの欠落エラー、API キーの移行失敗、JWKS キャッシュの競合状態、authorizedParties の欠落による CSRF 脆弱性、Core 2 アップグレード後のインポート パス エラー、JWT サイズ制限の問題、非推奨の API バージョン警告、ClerkProvider JSX コンポーネント エラー、async auth() ヘルパーの混乱、環境変数の設定ミス、Vite dev モード 431 ヘッダー エラー。

キーワード: クラーク、クラーク認証、クラーク認証、@clark/nextjs、@clark/backend、@clark/clark-react、clarkMiddleware、createRouteMatcher、verifyToken、useUser、useAuth、useClerk、JWT テンプレート、JWT クレーム、JWT ショートコード、カスタム JWT、セッション クレーム、getToken テンプレート、user.public_metadata、org_id、 org_slug、org_role、CustomJwtSessionClaims、sessionClaims メタデータ、クラーク Webhook、クラーク秘密キー、クラーク公開可能キー、保護されたルート、Cloudflare Workers 認証、Next.js 認証、shadcn/ui auth、@hono/clark-auth、「クラーク秘密キーがありません」、「JSX コンポーネントとして使用できません」、JWKS エラー、authorizedParties、クラークミドルウェア、 ClerkProvider、UserButton、SignIn、SignUp、クラーク テスト、テスト電子メール、テスト電話番号、+clark_test、424242 OTP、セッション トークン、テスト トークン、@clark/testing、Playwright テスト、E2E テスト、クラーク テスト モード、ボット検出、セッション トークンの生成、ユーザーのテスト
