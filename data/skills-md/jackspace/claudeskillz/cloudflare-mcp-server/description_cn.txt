在 Cloudflare Workers 上构建模型上下文协议 (MCP) 服务器时，请使用此技能。当使用 TypeScript 部署远程 MCP 服务器、实施 OAuth 身份验证（GitHub、Google、Azure 等）、使用持久对象用于有状态 MCP 服务器、实施 WebSocket 休眠以优化成本或配置双重传输方法（SSE + Streamable HTTP）时，应使用此技能。该技能可防止超过 15 个常见错误，包括 McpAgent 类导出问题、OAuth 重定向 URI 不匹配、WebSocket 状态丢失、持久对象绑定错误和 CORS 配置错误。包括用于基本 MCP 服务器的经过生产测试的模板、OAuth 代理集成、具有持久对象的状态服务器以及完整的 wrangler.jsonc 配置。涵盖所有 4 种身份验证模式：令牌验证、使用 DCR 的远程 OAuth、OAuth 代理 (workers-oauth-provider) 和完整的 OAuth 提供程序实现。独立于 Worker 和 Durable Objects 基础知识。代币效率：节省约 87%（40k → 5k 代币）。在 Cloudflare 的官方 MCP 服务器上进行了生产测试。

关键词：MCP 服务器、模型上下文协议、cloudflare mcp、mcp 工作人员、远程 mcp 服务器、mcp 打字稿、@modelcontextprotocol/sdk、mcp oauth、mcp 身份验证、github oauth mcp、持久对象 mcp、websocket 休眠、mcp sse、可流式 http、McpAgent 类、mcp 工具、mcp 资源、mcp 提示、oauth 代理、workers-oauth-provider、 mcp 部署、McpAgent 导出错误、OAuth 重定向 URI、WebSocket 状态丢失、mcp cors、mcp dcr
