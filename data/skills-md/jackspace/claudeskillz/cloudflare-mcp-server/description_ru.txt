Используйте этот навык при создании серверов Model Context Protocol (MCP) на Cloudflare Workers. Этот навык следует использовать при развертывании удаленных серверов MCP с помощью TypeScript, реализации аутентификации OAuth (GitHub, Google, Azure и т. д.), использовании устойчивых объектов для серверов MCP с отслеживанием состояния, реализации спящего режима WebSocket для оптимизации затрат или настройке методов двойного транспорта (SSE + Streamable HTTP). Этот навык предотвращает более 15 распространенных ошибок, включая проблемы экспорта классов McpAgent, несоответствия URI перенаправления OAuth, потерю состояния WebSocket, ошибки привязки устойчивых объектов и ошибки конфигурации CORS. Включает проверенные на производстве шаблоны для базовых серверов MCP, интеграцию прокси-сервера OAuth, серверы с отслеживанием состояния с устойчивыми объектами и полные конфигурации wrangler.jsonc. Охватывает все 4 шаблона аутентификации: проверку токена, удаленный OAuth с DCR, прокси-сервер OAuth (работник-поставщик-оаутентификатор) и полную реализацию поставщика OAuth. Автономный с основами Worker и Durable Objects. Эффективность токенов: экономия ~87% (40 тыс. → 5 тыс. токенов). Производство протестировано на официальных серверах MCP Cloudflare.

Ключевые слова: сервер MCP, протокол контекста модели, Cloudflare mcp, работники mcp, удаленный сервер mcp, машинописный сценарий mcp, @modelcontextprotocol/sdk, mcp oauth, проверка подлинности mcp, github oauth mcp, устойчивые объекты mcp, гибернация веб-сокетов, mcp sse, потоковый http, класс McpAgent, инструменты mcp, ресурсы mcp, подсказки mcp, прокси-сервер oauth, работники-oauth-провайдер, развертывание mcp, ошибка экспорта McpAgent, URI перенаправления OAuth, потеря состояния WebSocket, mcp cors, mcp dcr
