Cloudflare Agents SDK 综合指南 - 在 Workers + Durable 对象上构建人工智能驱动的自主代理。

使用场景：构建 AI 代理、使用 WebSocket 创建有状态代理、通过流实现聊天代理、使用 cron/delay 调度任务、运行异步工作流程、使用 Vectorize 构建 RAG（检索增强生成）系统、创建 MCP（模型上下文协议）服务器、实现人机循环工作流程、使用浏览器渲染浏览网页、使用 SQL 管理代理状态、在代理和客户端之间同步状态、从 Workers 调用代理、构建多代理系统或遇到代理配置错误。

防止超过 15 个已记录的问题：迁移不是原子的、缺少 new_sqlite_classes、代理类未导出、绑定名称不匹配、全局唯一性陷阱、WebSocket 状态处理、计划任务回调错误、状态大小限制、工作流绑定丢失、需要浏览器绑定、未找到矢量化索引、MCP 传输混乱、绕过身份验证、实例命名错误和状态同步失败。

关键词：Cloudflare Agents、代理 sdk、cloudflare 代理 sdk、代理类、持久对象代理、有状态代理、WebSocket 代理、this.setState、this.sql、this.schedule、计划任务、cron 代理、运行工作流、代理工作流、浏览网页、puppeteer 代理、浏览器渲染、rag 代理、矢量化代理、嵌入、mcp 服务器、McpAgent、mcp 工具、模型上下文协议、 RouteAgentRequest、getAgentByName、useAgent hook、AgentClient、agentFetch、useAgentChat、AIChatAgent、聊天代理、流式聊天、人机循环、hitl 代理、多代理、代理编排、自治代理、长时间运行的代理、AI SDK、Workers AI、“代理类必须扩展”、“new_sqlite_classes”、“需要迁移”、“未找到绑定”、“代理未导出”、“回调不存在”、“超出状态限制”
