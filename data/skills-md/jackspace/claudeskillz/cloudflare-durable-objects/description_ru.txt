Комплексное руководство по Cloudflare Durable Objects — глобально уникальным объектам с отслеживанием состояния для координации, связи в реальном времени и постоянного управления состоянием.

Используйте, когда: создание приложений реального времени, создание серверов WebSocket с спящим режимом, реализация чатов или многопользовательских игр, координация между несколькими клиентами, управление состоянием каждого пользователя или комнаты, реализация ограничения скорости или управления сеансами, планирование задач с сигналами тревоги, создание очередей или рабочих процессов или встреча с «экспортом классов», «new_sqlite_classes», «требуется миграция», «гибернация веб-сокета», «ошибка API-сигнала» или «глобальный». ошибки уникальности.

Предотвращает более 15 задокументированных проблем: класс не экспортируется, отсутствуют миграции, неправильный тип миграции, служебные данные конструктора, блокирующие спящий режим, setTimeout, нарушающий спящий режим, состояние в памяти теряется при гибернации, исходящий WebSocket не переходит в спящий режим, глобальная путаница уникальности, частичное удаление всех на серверной части KV, несоответствие имен привязок, превышение ограничений размера состояния, неатомарные миграции, неправильное понимание подсказок местоположения, сбои повторных попыток тревоги и выборка вызовы, блокирующие спящий режим.

Ключевые слова: устойчивые объекты, Cloudflare do, класс DurableObject, привязки do, спящий режим веб-сокета, API состояния API, ctx.storage.sql, ctx.acceptWebSocket, webSocketMessage, обработчик Alarm(), Storage.setAlarm, idFromName, newUniqueId, getByName, DurableObjectStub, SerializeAttachment, Cloudflare в реальном времени, многопользовательский Cloudflare, чат работники комнаты, координация Cloudflare, работники с отслеживанием состояния, new_sqlite_classes, выполнение миграции, подсказки местоположения, методы RPC, blockConcurrencyWhile, «выполнить экспорт классов», «new_sqlite_classes», «требуются миграции», «спящий режим веб-сокета», «ошибка API сигнализации», «глобальная уникальность», «привязка не найдена»
